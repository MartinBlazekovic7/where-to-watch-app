<body>
  <h1>Where Can I Watch?</h1>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-12">
        <div class="inputs">
          <span class="material-symbols-outlined" (click)="searchMovies()">
            search
          </span>
          <input
            type="text"
            class="movie-input"
            maxlength="40"
            placeholder="Name of movie or TV show"
            [(ngModel)]="userInput"
          />
        </div>
      </div>
      <div class="col-lg-4 col-12">
        <div class="buttons">
          <span
            class="material-symbols-outlined"
            (click)="toggleCountryDialog = true"
          >
            settings
          </span>
          <button (click)="searchMovies()">SEARCH</button>
        </div>
      </div>
    </div>

    <div class="content" *ngIf="searching">
      <div class="tagline">
        <p (click)="clearSearch()">Clear</p>
      </div>
      <div
        *ngFor="let item of searchResults"
        class="result-item"
        (click)="findProviders(item)"
      >
        <img
          *ngIf="item.poster_path"
          src="https://image.tmdb.org/t/p/original{{ item.poster_path }}"
          alt="itemPoster"
        />
        <img
          *ngIf="!item.poster_path"
          src="../../../assets/images/posterPlaceholder.jpg"
          alt="itemPoster"
        />
        <div>
          <h2>
            {{ item.title ? item.title : item.name }}
          </h2>
          <p>
            <span class="material-symbols-outlined"> event </span>
            <strong>
              {{
                item.first_air_date
                  ? formatDate(item?.first_air_date!)
                  : formatDate(item?.release_date!)
              }}</strong
            >
          </p>
          <p>
            <span class="material-symbols-outlined"> star </span>
            <strong>{{ item.vote_average }}</strong>
          </p>
          <p>{{ item.overview }}</p>
        </div>
      </div>
    </div>
  </div>
</body>

<div *ngIf="toggleCountryDialog" class="item-window">
  <div
    [@inOutAnimationBigger]
    class="window"
    style="height: 600px; width: 800px"
  >
    <div
      *ngFor="let country of countries"
      (click)="changeCountry(country)"
      [ngClass]="country === chosenCountry ? 'item chosen' : 'item'"
      [@inOutAnimation]
    >
      {{ country.name?.toUpperCase() }}
    </div>
  </div>
</div>
